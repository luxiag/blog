import{_ as n,e as a,g as l,o as e}from"./app-BcLUFOMF.js";const p={};function o(t,s){return e(),a("div",null,s[0]||(s[0]=[l(`<h1 id="使用" tabindex="-1"><a class="header-anchor" href="#使用"><span>使用</span></a></h1><p>安装AutoMapper和AutoMapper.Extensions.Microsoft.DependencyInjection包</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#282A36;color:#F8F8F2;"><pre class="shiki dracula vp-code"><code><span class="line"><span style="color:#50FA7B;">PM</span><span style="color:#F8F8F2;">&gt; </span><span style="color:#F1FA8C;">Install-Package</span><span style="color:#F1FA8C;"> AutoMapper</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>定义源模型和目标模型</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="background-color:#282A36;color:#F8F8F2;"><pre class="shiki dracula vp-code"><code><span class="line"><span style="color:#FF79C6;">public</span><span style="color:#FF79C6;"> class</span><span style="color:#8BE9FD;"> SourceModel</span></span>
<span class="line"><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#FF79C6;">    public</span><span style="color:#FF79C6;"> int</span><span style="color:#F8F8F2;"> Id { </span><span style="color:#FF79C6;">get</span><span style="color:#F8F8F2;">; </span><span style="color:#FF79C6;">set</span><span style="color:#F8F8F2;">; }</span></span>
<span class="line"><span style="color:#FF79C6;">    public</span><span style="color:#FF79C6;"> string</span><span style="color:#F8F8F2;"> Name { </span><span style="color:#FF79C6;">get</span><span style="color:#F8F8F2;">; </span><span style="color:#FF79C6;">set</span><span style="color:#F8F8F2;">; }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">public</span><span style="color:#FF79C6;"> class</span><span style="color:#8BE9FD;"> DestinationModel</span></span>
<span class="line"><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#FF79C6;">    public</span><span style="color:#FF79C6;"> int</span><span style="color:#F8F8F2;"> Id { </span><span style="color:#FF79C6;">get</span><span style="color:#F8F8F2;">; </span><span style="color:#FF79C6;">set</span><span style="color:#F8F8F2;">; }</span></span>
<span class="line"><span style="color:#FF79C6;">    public</span><span style="color:#FF79C6;"> string</span><span style="color:#F8F8F2;"> FullName { </span><span style="color:#FF79C6;">get</span><span style="color:#F8F8F2;">; </span><span style="color:#FF79C6;">set</span><span style="color:#F8F8F2;">; }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建映射配置</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="background-color:#282A36;color:#F8F8F2;"><pre class="shiki dracula vp-code"><code><span class="line"><span style="color:#FF79C6;">using</span><span style="color:#8BE9FD;font-style:italic;"> AutoMapper</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">public</span><span style="color:#FF79C6;"> class</span><span style="color:#8BE9FD;"> MappingProfile</span><span style="color:#F8F8F2;"> : </span><span style="color:#8BE9FD;font-style:italic;">Profile</span></span>
<span class="line"><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#FF79C6;">    public</span><span style="color:#50FA7B;"> MappingProfile</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">    {</span></span>
<span class="line"><span style="color:#6272A4;">        // 在这里添加你的映射配置</span></span>
<span class="line"><span style="color:#50FA7B;">        CreateMap</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#8BE9FD;font-style:italic;">SourceModel</span><span style="color:#F8F8F2;">, </span><span style="color:#8BE9FD;font-style:italic;">DestinationModel</span><span style="color:#F8F8F2;">&gt;();</span></span>
<span class="line"><span style="color:#6272A4;">        // 例如：CreateMap&lt;User, UserDTO&gt;();</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注入autoMapper依赖</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="background-color:#282A36;color:#F8F8F2;"><pre class="shiki dracula vp-code"><code><span class="line"><span style="color:#6272A4;">    //注入autoMapper依赖</span></span>
<span class="line"><span style="color:#F8F8F2;">    services.</span><span style="color:#50FA7B;">AddAutoMapper</span><span style="color:#F8F8F2;">(AppDomain.CurrentDomain.</span><span style="color:#50FA7B;">GetAssemblies</span><span style="color:#F8F8F2;">());</span></span>
<span class="line"><span style="color:#6272A4;">    /**</span></span>
<span class="line"><span style="color:#6272A4;">    AppDomain.CurrentDomain.GetAssemblies()</span></span>
<span class="line"><span style="color:#6272A4;">    - 获取当前应用程序域中所有已加载的程序集</span></span>
<span class="line"><span style="color:#6272A4;">    - AutoMapper 会扫描这些程序集</span></span>
<span class="line"><span style="color:#6272A4;">    - 自动查找并注册所有继承自 Profile 的映射配置类</span></span>
<span class="line"><span style="color:#6272A4;">    **/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置映射规则</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="background-color:#282A36;color:#F8F8F2;"><pre class="shiki dracula vp-code"><code><span class="line"><span style="color:#FF79C6;">public</span><span style="color:#FF79C6;"> class</span><span style="color:#8BE9FD;"> MappingProfile</span><span style="color:#F8F8F2;"> : </span><span style="color:#8BE9FD;font-style:italic;">Profile</span></span>
<span class="line"><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#FF79C6;">    public</span><span style="color:#50FA7B;"> MappingProfile</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">    {</span></span>
<span class="line"><span style="color:#50FA7B;">        CreateMap</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#8BE9FD;font-style:italic;">SourceModel</span><span style="color:#F8F8F2;">, </span><span style="color:#8BE9FD;font-style:italic;">DestinationModel</span><span style="color:#F8F8F2;">&gt;()</span></span>
<span class="line"><span style="color:#F8F8F2;">            .</span><span style="color:#50FA7B;">ForMember</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">dest</span><span style="color:#FF79C6;"> =&gt;</span><span style="color:#F8F8F2;"> dest.FullName, </span><span style="color:#FFB86C;font-style:italic;">opt</span><span style="color:#FF79C6;"> =&gt;</span><span style="color:#F8F8F2;"> opt.</span><span style="color:#50FA7B;">MapFrom</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">src</span><span style="color:#FF79C6;"> =&gt;</span><span style="color:#F8F8F2;"> src.Name));</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在控制器中使用AutoMapper</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="background-color:#282A36;color:#F8F8F2;"><pre class="shiki dracula vp-code"><code><span class="line"><span style="color:#FF79C6;">using</span><span style="color:#8BE9FD;font-style:italic;"> AutoMapper</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#FF79C6;">using</span><span style="color:#8BE9FD;font-style:italic;"> Microsoft</span><span style="color:#F8F8F2;">.</span><span style="color:#8BE9FD;font-style:italic;">AspNetCore</span><span style="color:#F8F8F2;">.</span><span style="color:#8BE9FD;font-style:italic;">Mvc</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">[</span><span style="color:#8BE9FD;font-style:italic;">ApiController</span><span style="color:#F8F8F2;">]</span></span>
<span class="line"><span style="color:#F8F8F2;">[</span><span style="color:#8BE9FD;font-style:italic;">Route</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">api/[controller]</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">)]</span></span>
<span class="line"><span style="color:#FF79C6;">public</span><span style="color:#FF79C6;"> class</span><span style="color:#8BE9FD;"> ExampleController</span><span style="color:#F8F8F2;"> : </span><span style="color:#8BE9FD;font-style:italic;">ControllerBase</span></span>
<span class="line"><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#FF79C6;">    private</span><span style="color:#FF79C6;"> readonly</span><span style="color:#8BE9FD;font-style:italic;"> IMapper</span><span style="color:#F8F8F2;"> _mapper;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">    public</span><span style="color:#50FA7B;"> ExampleController</span><span style="color:#F8F8F2;">(</span><span style="color:#8BE9FD;font-style:italic;">IMapper</span><span style="color:#FFB86C;font-style:italic;"> mapper</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    {</span></span>
<span class="line"><span style="color:#F8F8F2;">        _mapper </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> mapper  </span><span style="color:#FF79C6;">??</span><span style="color:#FF79C6;"> throw</span><span style="color:#FF79C6;"> new</span><span style="color:#8BE9FD;font-style:italic;"> ArgumentNullException</span><span style="color:#F8F8F2;">(</span><span style="color:#FF79C6;">nameof</span><span style="color:#F8F8F2;">(mapper));</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    [</span><span style="color:#8BE9FD;font-style:italic;">HttpGet</span><span style="color:#F8F8F2;">]</span></span>
<span class="line"><span style="color:#FF79C6;">    public</span><span style="color:#8BE9FD;font-style:italic;"> ActionResult</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#8BE9FD;font-style:italic;">DestinationModel</span><span style="color:#F8F8F2;">&gt; </span><span style="color:#50FA7B;">Get</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">    {</span></span>
<span class="line"><span style="color:#FF79C6;">        var</span><span style="color:#F8F8F2;"> source </span><span style="color:#FF79C6;">=</span><span style="color:#FF79C6;"> new</span><span style="color:#8BE9FD;font-style:italic;"> SourceModel</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#FF79C6;">        var</span><span style="color:#F8F8F2;"> destination </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> _mapper.</span><span style="color:#50FA7B;">Map</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#8BE9FD;font-style:italic;">DestinationModel</span><span style="color:#F8F8F2;">&gt;(source);</span></span>
<span class="line"><span style="color:#FF79C6;">        return</span><span style="color:#50FA7B;"> Ok</span><span style="color:#F8F8F2;">(destination);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="映射规则" tabindex="-1"><a class="header-anchor" href="#映射规则"><span>映射规则</span></a></h1><ul><li>src：源对象。即映射操作中的源类型对象。在这个例子中，它是SourceModel类型的实例。</li><li>dest：目标对象。即映射操作中的目标类型对象。在这个例子中，它是DestinationModel类型的实例。</li><li>srcMember：源对象的成员值。即映射操作中当前成员在源对象中的值。</li><li>destMember：目标对象的成员值。即映射操作中当前成员在目标对象中的值（在这个例子中未使用）。</li></ul><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="background-color:#282A36;color:#F8F8F2;"><pre class="shiki dracula vp-code"><code><span class="line"><span style="color:#FF79C6;">using</span><span style="color:#8BE9FD;font-style:italic;"> AutoMapper</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">public</span><span style="color:#FF79C6;"> class</span><span style="color:#8BE9FD;"> MappingProfile</span><span style="color:#F8F8F2;"> : </span><span style="color:#8BE9FD;font-style:italic;">Profile</span></span>
<span class="line"><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#FF79C6;">    public</span><span style="color:#50FA7B;"> MappingProfile</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">    {</span></span>
<span class="line"><span style="color:#6272A4;">        // 自定义成员映射规则：将 SourceModel 的 Name 成员映射到 DestinationModel 的 FullName 成员</span></span>
<span class="line"><span style="color:#50FA7B;">        CreateMap</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#8BE9FD;font-style:italic;">SourceModel</span><span style="color:#F8F8F2;">, </span><span style="color:#8BE9FD;font-style:italic;">DestinationModel</span><span style="color:#F8F8F2;">&gt;()</span></span>
<span class="line"><span style="color:#F8F8F2;">            .</span><span style="color:#50FA7B;">ForMember</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">dest</span><span style="color:#FF79C6;"> =&gt;</span><span style="color:#F8F8F2;"> dest.FullName, </span><span style="color:#FFB86C;font-style:italic;">opt</span><span style="color:#FF79C6;"> =&gt;</span><span style="color:#F8F8F2;"> opt.</span><span style="color:#50FA7B;">MapFrom</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">src</span><span style="color:#FF79C6;"> =&gt;</span><span style="color:#F8F8F2;"> src.Name));</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,16)]))}const c=n(p,[["render",o],["__file","auto-mapper.html.vue"]]),r=JSON.parse('{"path":"/dotnet/auto-mapper.html","title":"AutoMapper","lang":"en-US","frontmatter":{"title":"AutoMapper","date":"2023-03-15T16:25:33.000Z","category":["DotNet"],"description":"使用 安装AutoMapper和AutoMapper.Extensions.Microsoft.DependencyInjection包 定义源模型和目标模型 创建映射配置 注入autoMapper依赖 配置映射规则 在控制器中使用AutoMapper 映射规则 src：源对象。即映射操作中的源类型对象。在这个例子中，它是SourceModel类型的实...","head":[["meta",{"property":"og:url","content":"https://luxiag.github.io/luxiag/blog/dotnet/auto-mapper.html"}],["meta",{"property":"og:title","content":"AutoMapper"}],["meta",{"property":"og:description","content":"使用 安装AutoMapper和AutoMapper.Extensions.Microsoft.DependencyInjection包 定义源模型和目标模型 创建映射配置 注入autoMapper依赖 配置映射规则 在控制器中使用AutoMapper 映射规则 src：源对象。即映射操作中的源类型对象。在这个例子中，它是SourceModel类型的实..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-03-18T02:54:04.000Z"}],["meta",{"property":"article:published_time","content":"2023-03-15T16:25:33.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-18T02:54:04.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"AutoMapper\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-03-15T16:25:33.000Z\\",\\"dateModified\\":\\"2025-03-18T02:54:04.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"luxiag\\",\\"url\\":\\"https://luxiag.github.io/luxiag\\"}]}"]]},"git":{"createdTime":1742266444000,"updatedTime":1742266444000,"contributors":[{"name":"luxiag","username":"luxiag","email":"luxiag@qq.com","commits":1,"url":"https://github.com/luxiag"}]},"readingTime":{"minutes":1.36,"words":407},"filePathRelative":"dotnet/auto-mapper.md","localizedDate":"March 15, 2023","excerpt":"\\n<p>安装AutoMapper和AutoMapper.Extensions.Microsoft.DependencyInjection包</p>\\n<div class=\\"language-shell line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"shell\\" data-title=\\"shell\\" style=\\"background-color:#282A36;color:#F8F8F2\\"><pre class=\\"shiki dracula vp-code\\"><code><span class=\\"line\\"><span style=\\"color:#50FA7B\\">PM</span><span style=\\"color:#F8F8F2\\">&gt; </span><span style=\\"color:#F1FA8C\\">Install-Package</span><span style=\\"color:#F1FA8C\\"> AutoMapper</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{c as comp,r as data};
