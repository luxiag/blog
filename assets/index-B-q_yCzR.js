import{H as dt,g as pt,d as gt,a as ut,w as X,n as R}from"./index-B-bTPAo1.js";import{l as he,b as ce}from"./index-B-bTPAo1.js";import{o as q,t as E,x as mt,y as ft,m as K,a as Y,l as xt,i as yt,b as vt,c as kt}from"./zoom-C-h9mQ31.js";const G=typeof navigator<"u"&&navigator.userAgent.includes("Macintosh"),bt=q(vt),J=(e=1,t=3,r=2)=>i=>e+t/r**i.state.depth,Q={autoFit:!1,duration:500,embedGlobalCSS:!0,fitRatio:.95,maxInitialScale:2,scrollForPan:G,initialExpandLevel:-1,zoom:!0,pan:!0,toggleRecursively:!1,color:e=>{var t;return bt(`${((t=e.state)==null?void 0:t.path)||""}`)},lineWidth:J(),maxWidth:0,nodeMinHeight:16,paddingX:8,spacingHorizontal:80,spacingVertical:5};function ne(e){const t={},r={...e},{color:i,colorFreezeLevel:n,lineWidth:o}=r;if((i==null?void 0:i.length)===1){const l=i[0];t.color=()=>l}else if(i!=null&&i.length){const l=q(i);t.color=s=>l(`${s.state.path}`)}if(n){const l=t.color||Q.color;t.color=s=>(s={...s,state:{...s.state,path:s.state.path.split(".").slice(0,n).join(".")}},l(s))}if(o){const l=Array.isArray(o)?o:[o,0,1];t.lineWidth=J(...l)}return["duration","fitRatio","initialExpandLevel","maxInitialScale","maxWidth","nodeMinHeight","paddingX","spacingHorizontal","spacingVertical"].forEach(l=>{const s=r[l];typeof s=="number"&&(t[l]=s)}),["zoom","pan"].forEach(l=>{const s=r[l];s!=null&&(t[l]=!!s)}),t}function wt(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return(t>>>0).toString(36)}function k(e){if(typeof e=="string"){const r=e;e=i=>i.matches(r)}const t=e;return function(){let r=Array.from(this.childNodes);return t&&(r=r.filter(i=>t(i))),r}}function zt(e){var t=0,r=e.children,i=r&&r.length;if(!i)t=1;else for(;--i>=0;)t+=r[i].value;e.value=t}function Et(){return this.eachAfter(zt)}function Ct(e){var t=this,r,i=[t],n,o,l;do for(r=i.reverse(),i=[];t=r.pop();)if(e(t),n=t.children,n)for(o=0,l=n.length;o<l;++o)i.push(n[o]);while(i.length);return this}function St(e){for(var t=this,r=[t],i,n;t=r.pop();)if(e(t),i=t.children,i)for(n=i.length-1;n>=0;--n)r.push(i[n]);return this}function Xt(e){for(var t=this,r=[t],i=[],n,o,l;t=r.pop();)if(i.push(t),n=t.children,n)for(o=0,l=n.length;o<l;++o)r.push(n[o]);for(;t=i.pop();)e(t);return this}function Rt(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,i=t.children,n=i&&i.length;--n>=0;)r+=i[n].value;t.value=r})}function At(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function jt(e){for(var t=this,r=$t(t,e),i=[t];t!==r;)t=t.parent,i.push(t);for(var n=i.length;e!==r;)i.splice(n,0,e),e=e.parent;return i}function $t(e,t){if(e===t)return e;var r=e.ancestors(),i=t.ancestors(),n=null;for(e=r.pop(),t=i.pop();e===t;)n=e,e=r.pop(),t=i.pop();return n}function Ot(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Ht(){var e=[];return this.each(function(t){e.push(t)}),e}function Mt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Bt(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}function B(e,t){var r=new A(e),i=+e.value&&(r.value=e.value),n,o=[r],l,s,h,p;for(t==null&&(t=_t);n=o.pop();)if(i&&(n.value=+n.data.value),(s=t(n.data))&&(p=s.length))for(n.children=new Array(p),h=p-1;h>=0;--h)o.push(l=n.children[h]=new A(s[h])),l.parent=n,l.depth=n.depth+1;return r.eachBefore(Ft)}function Dt(){return B(this).eachBefore(Wt)}function _t(e){return e.children}function Wt(e){e.data=e.data.data}function Ft(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function A(e){this.data=e,this.depth=this.height=0,this.parent=null}A.prototype=B.prototype={constructor:A,count:Et,each:Ct,eachAfter:Xt,eachBefore:St,sum:Rt,sort:At,path:jt,ancestors:Ot,descendants:Ht,leaves:Mt,links:Bt,copy:Dt};const Lt="2.1.2",Tt={version:Lt},{version:Nt}=Tt,Pt=Object.freeze({children:e=>e.children,nodeSize:e=>e.data.size,spacing:0});function tt(e){const t=Object.assign({},Pt,e);function r(s){const h=t[s];return typeof h=="function"?h:()=>h}function i(s){const h=l(o(),s,p=>p.children);return h.update(),h.data}function n(){const s=r("nodeSize"),h=r("spacing");return class U extends B.prototype.constructor{constructor(c){super(c)}copy(){const c=l(this.constructor,this,g=>g.children);return c.each(g=>g.data=g.data.data),c}get size(){return s(this)}spacing(c){return h(this,c)}get nodes(){return this.descendants()}get xSize(){return this.size[0]}get ySize(){return this.size[1]}get top(){return this.y}get bottom(){return this.y+this.ySize}get left(){return this.x-this.xSize/2}get right(){return this.x+this.xSize/2}get root(){const c=this.ancestors();return c[c.length-1]}get numChildren(){return this.hasChildren?this.children.length:0}get hasChildren(){return!this.noChildren}get noChildren(){return this.children===null}get firstChild(){return this.hasChildren?this.children[0]:null}get lastChild(){return this.hasChildren?this.children[this.numChildren-1]:null}get extents(){return(this.children||[]).reduce((c,g)=>U.maxExtents(c,g.extents),this.nodeExtents)}get nodeExtents(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}static maxExtents(c,g){return{top:Math.min(c.top,g.top),bottom:Math.max(c.bottom,g.bottom),left:Math.min(c.left,g.left),right:Math.max(c.right,g.right)}}}}function o(){const s=n(),h=r("nodeSize"),p=r("spacing");return class extends s{constructor(c){super(c),Object.assign(this,{x:0,y:0,relX:0,prelim:0,shift:0,change:0,lExt:this,lExtRelX:0,lThr:null,rExt:this,rExtRelX:0,rThr:null})}get size(){return h(this.data)}spacing(c){return p(this.data,c.data)}get x(){return this.data.x}set x(c){this.data.x=c}get y(){return this.data.y}set y(c){this.data.y=c}update(){return et(this),at(this),this}}}function l(s,h,p){const c=(g,u)=>{const m=new s(g);Object.assign(m,{parent:u,depth:u===null?0:u.depth+1,height:0,length:1});const x=p(g)||[];return m.children=x.length===0?null:x.map(y=>c(y,m)),m.children&&Object.assign(m,m.children.reduce((y,v)=>({height:Math.max(y.height,v.height+1),length:y.length+v.length}),m)),m};return c(h,null)}return Object.assign(i,{nodeSize(s){return arguments.length?(t.nodeSize=s,i):t.nodeSize},spacing(s){return arguments.length?(t.spacing=s,i):t.spacing},children(s){return arguments.length?(t.children=s,i):t.children},hierarchy(s,h){const p=typeof h>"u"?t.children:h;return l(n(),s,p)},dump(s){const h=r("nodeSize"),p=c=>g=>{const u=c+"  ",m=c+"    ",{x,y}=g,v=h(g),b=g.children||[],z=b.length===0?" ":`,${u}children: [${m}${b.map(p(m)).join(m)}${u}],${c}`;return`{ size: [${v.join(", ")}],${u}x: ${x}, y: ${y}${z}},`};return p(`
`)(s)}}),i}tt.version=Nt;const et=(e,t=0)=>(e.y=t,(e.children||[]).reduce((r,i)=>{const[n,o]=r;et(i,e.y+e.ySize);const l=(n===0?i.lExt:i.rExt).bottom;n!==0&&Vt(e,n,o);const s=Ut(l,n,o);return[n+1,s]},[0,null]),It(e),Qt(e),e),at=(e,t,r)=>{typeof t>"u"&&(t=-e.relX-e.prelim,r=0);const i=t+e.relX;return e.relX=i+e.prelim-r,e.prelim=0,e.x=r+e.relX,(e.children||[]).forEach(n=>at(n,i,e.x)),e},It=e=>{(e.children||[]).reduce((t,r)=>{const[i,n]=t,o=i+r.shift,l=n+o+r.change;return r.relX+=l,[o,l]},[0,0])},Vt=(e,t,r)=>{const i=e.children[t-1],n=e.children[t];let o=i,l=i.relX,s=n,h=n.relX,p=!0;for(;o&&s;){o.bottom>r.lowY&&(r=r.next);const c=l+o.prelim-(h+s.prelim)+o.xSize/2+s.xSize/2+o.spacing(s);(c>0||c<0&&p)&&(h+=c,Kt(n,c),Yt(e,t,r.index,c)),p=!1;const g=o.bottom,u=s.bottom;g<=u&&(o=qt(o),o&&(l+=o.relX)),g>=u&&(s=Zt(s),s&&(h+=s.relX))}!o&&s?Gt(e,t,s,h):o&&!s&&Jt(e,t,o,l)},Kt=(e,t)=>{e.relX+=t,e.lExtRelX+=t,e.rExtRelX+=t},Yt=(e,t,r,i)=>{const n=e.children[t],o=t-r;if(o>1){const l=i/o;e.children[r+1].shift+=l,n.shift-=l,n.change-=i-l}},Zt=e=>e.hasChildren?e.firstChild:e.lThr,qt=e=>e.hasChildren?e.lastChild:e.rThr,Gt=(e,t,r,i)=>{const n=e.firstChild,o=n.lExt,l=e.children[t];o.lThr=r;const s=i-r.relX-n.lExtRelX;o.relX+=s,o.prelim-=s,n.lExt=l.lExt,n.lExtRelX=l.lExtRelX},Jt=(e,t,r,i)=>{const n=e.children[t],o=n.rExt,l=e.children[t-1];o.rThr=r;const s=i-r.relX-n.rExtRelX;o.relX+=s,o.prelim-=s,n.rExt=l.rExt,n.rExtRelX=l.rExtRelX},Qt=e=>{if(e.hasChildren){const t=e.firstChild,r=e.lastChild,i=(t.prelim+t.relX-t.xSize/2+r.relX+r.prelim+r.xSize/2)/2;Object.assign(e,{prelim:i,lExt:t.lExt,lExtRelX:t.lExtRelX,rExt:r.rExt,rExtRelX:r.rExtRelX})}},Ut=(e,t,r)=>{for(;r!==null&&e>=r.lowY;)r=r.next;return{lowY:e,index:t,next:r}},rt=".markmap{--markmap-max-width: 9999px;--markmap-a-color: #0097e6;--markmap-a-hover-color: #00a8ff;--markmap-code-bg: #f0f0f0;--markmap-code-color: #555;--markmap-highlight-bg: #ffeaa7;--markmap-table-border: 1px solid currentColor;--markmap-font: 300 16px/20px sans-serif;--markmap-circle-open-bg: #fff;--markmap-text-color: #333;--markmap-highlight-node-bg: #ff02;font:var(--markmap-font);color:var(--markmap-text-color)}.markmap-link{fill:none}.markmap-node>circle{cursor:pointer}.markmap-foreign{display:inline-block}.markmap-foreign p{margin:0}.markmap-foreign a{color:var(--markmap-a-color)}.markmap-foreign a:hover{color:var(--markmap-a-hover-color)}.markmap-foreign code{padding:.25em;font-size:calc(1em - 2px);color:var(--markmap-code-color);background-color:var(--markmap-code-bg);border-radius:2px}.markmap-foreign pre{margin:0}.markmap-foreign pre>code{display:block}.markmap-foreign del{text-decoration:line-through}.markmap-foreign em{font-style:italic}.markmap-foreign strong{font-weight:700}.markmap-foreign mark{background:var(--markmap-highlight-bg)}.markmap-foreign table,.markmap-foreign th,.markmap-foreign td{border-collapse:collapse;border:var(--markmap-table-border)}.markmap-foreign img{display:inline-block}.markmap-foreign svg{fill:currentColor}.markmap-foreign>div{width:var(--markmap-max-width);text-align:left}.markmap-foreign>div>div{display:inline-block}.markmap-highlight rect{fill:var(--markmap-highlight-node-bg)}.markmap-dark .markmap{--markmap-code-bg: #1a1b26;--markmap-code-color: #ddd;--markmap-circle-open-bg: #444;--markmap-text-color: #eee}",se=rt,O="g.markmap-node",te="path.markmap-link",ee="g.markmap-highlight",H=xt();function Z(e,t){const r=kt(e,t);return e[r]}function M(e){e.stopPropagation()}const ae=new dt;class it{constructor(t,r){this.options={...Q},this._disposeList=[],this.handleZoom=i=>{const{transform:n}=i;this.g.attr("transform",n)},this.handlePan=i=>{i.preventDefault();const n=E(this.svg.node()),o=n.translate(-i.deltaX/n.k,-i.deltaY/n.k);this.svg.call(this.zoom.transform,o)},this.handleClick=(i,n)=>{let o=this.options.toggleRecursively;(G?i.metaKey:i.ctrlKey)&&(o=!o),this.toggleNode(n,o)},this.ensureView=this.ensureVisible,this.svg=t.datum?t:mt(t),this.styleNode=this.svg.append("style"),this.zoom=ft().filter(i=>this.options.scrollForPan&&i.type==="wheel"?i.ctrlKey&&!i.button:(!i.ctrlKey||i.type==="wheel")&&!i.button).on("zoom",this.handleZoom),this.setOptions(r),this.state={id:this.options.id||this.svg.attr("id")||pt(),rect:{x1:0,y1:0,x2:0,y2:0}},this.g=this.svg.append("g"),this.g.append("g").attr("class","markmap-highlight"),this._observer=new ResizeObserver(gt(()=>{this.renderData()},100)),this._disposeList.push(ae.tap(()=>{this.setData()}),()=>this._observer.disconnect())}getStyleContent(){const{style:t}=this.options,{id:r}=this.state,i=typeof t=="function"?t(r):"";return[this.options.embedGlobalCSS&&rt,i].filter(Boolean).join(`
`)}updateStyle(){this.svg.attr("class",ut(this.svg.attr("class"),"markmap",this.state.id));const t=this.getStyleContent();this.styleNode.text(t)}async toggleNode(t,r=!1){var i,n;const o=(i=t.payload)!=null&&i.fold?0:1;r?X(t,(l,s)=>{l.payload={...l.payload,fold:o},s()}):t.payload={...t.payload,fold:(n=t.payload)!=null&&n.fold?0:1},await this.renderData(t)}_initializeData(t){let r=0;const{color:i,initialExpandLevel:n}=this.options;let o=0,l=0;return X(t,(s,h,p)=>{var c,g,u,m;l+=1,s.children=(c=s.children)==null?void 0:c.map(y=>({...y})),r+=1,s.state={...s.state,depth:l,id:r,rect:{x:0,y:0,width:0,height:0},size:[0,0]},s.state.key=[(g=p==null?void 0:p.state)==null?void 0:g.id,s.state.id].filter(Boolean).join(".")+wt(s.content),s.state.path=[(u=p==null?void 0:p.state)==null?void 0:u.path,s.state.id].filter(Boolean).join("."),i(s);const x=((m=s.payload)==null?void 0:m.fold)===2;x?o+=1:(o||n>=0&&s.state.depth>=n)&&(s.payload={...s.payload,fold:1}),h(),x&&(o-=1),l-=1}),t}_relayout(){if(!this.state.data)return;this.g.selectAll(k(O)).selectAll(k("foreignObject")).each(function(h){var p;const c=(p=this.firstChild)==null?void 0:p.firstChild,g=[c.scrollWidth,c.scrollHeight];h.state.size=g});const{lineWidth:t,paddingX:r,spacingHorizontal:i,spacingVertical:n}=this.options,o=tt({}).children(h=>{var p;if(!((p=h.payload)!=null&&p.fold))return h.children}).nodeSize(h=>{const[p,c]=h.data.state.size;return[c,p+(p?r*2:0)+i]}).spacing((h,p)=>(h.parent===p.parent?n:n*2)+t(h.data)),l=o.hierarchy(this.state.data);o(l);const s=l.descendants();s.forEach(h=>{const p=h.data;p.state.rect={x:h.y,y:h.x-h.xSize/2,width:h.ySize-i,height:h.xSize}}),this.state.rect={x1:Y(s,h=>h.data.state.rect.x)||0,y1:Y(s,h=>h.data.state.rect.y)||0,x2:K(s,h=>h.data.state.rect.x+h.data.state.rect.width)||0,y2:K(s,h=>h.data.state.rect.y+h.data.state.rect.height)||0}}setOptions(t){this.options={...this.options,...t},this.options.zoom?this.svg.call(this.zoom):this.svg.on(".zoom",null),this.options.pan?this.svg.on("wheel",this.handlePan):this.svg.on("wheel",null)}async setData(t,r){r&&this.setOptions(r),t&&(this.state.data=this._initializeData(t)),this.state.data&&(this.updateStyle(),await this.renderData())}async setHighlight(t){this.state.highlight=t||void 0,await this.renderData()}_getHighlightRect(t){const r=this.svg.node(),i=4/E(r).k,n={...t.state.rect};return n.x-=i,n.y-=i,n.width+=2*i,n.height+=2*i,n}async renderData(t){const{paddingX:r,autoFit:i,color:n,maxWidth:o,lineWidth:l}=this.options,s=this.state.data;if(!s)return;const h={},p={},c=[];X(s,(a,d,f)=>{var w;(w=a.payload)!=null&&w.fold||d(),h[a.state.id]=a,f&&(p[a.state.id]=f.state.id),c.push(a)});const g={},u={},m=a=>{!a||g[a.state.id]||X(a,(d,f)=>{g[d.state.id]=a.state.id,f()})},x=a=>u[g[a.state.id]]||s.state.rect,y=a=>(h[g[a.state.id]]||s).state.rect;u[s.state.id]=s.state.rect,t&&m(t);let{highlight:v}=this.state;v&&!h[v.state.id]&&(v=void 0);let b=this.g.selectAll(k(ee)).selectAll(k("rect")).data(v?[this._getHighlightRect(v)]:[]).join("rect").attr("x",a=>a.x).attr("y",a=>a.y).attr("width",a=>a.width).attr("height",a=>a.height);const z=this.g.selectAll(k(O)).each(a=>{u[a.state.id]=a.state.rect}).data(c,a=>a.state.key),D=z.enter().append("g").attr("data-depth",a=>a.state.depth).attr("data-path",a=>a.state.path).each(a=>{m(h[p[a.state.id]])}),C=z.exit().each(a=>{m(h[p[a.state.id]])}),S=z.merge(D).attr("class",a=>{var d;return["markmap-node",((d=a.payload)==null?void 0:d.fold)&&"markmap-fold"].filter(Boolean).join(" ")}),_=S.selectAll(k("line")).data(a=>[a],a=>a.state.key),W=_.enter().append("line").attr("stroke",a=>n(a)).attr("stroke-width",0),F=_.merge(W),L=S.selectAll(k("circle")).data(a=>{var d;return(d=a.children)!=null&&d.length?[a]:[]},a=>a.state.key),T=L.enter().append("circle").attr("stroke-width",0).attr("r",0).on("click",(a,d)=>this.handleClick(a,d)).on("mousedown",M).merge(L).attr("stroke",a=>n(a)).attr("fill",a=>{var d;return(d=a.payload)!=null&&d.fold&&a.children?n(a):"var(--markmap-circle-open-bg)"}),N=this._observer,P=S.selectAll(k("foreignObject")).data(a=>[a],a=>a.state.key),j=P.enter().append("foreignObject").attr("class","markmap-foreign").attr("x",r).attr("y",0).style("opacity",0).on("mousedown",M).on("dblclick",M);j.append("xhtml:div").append("xhtml:div").html(a=>a.content).attr("xmlns","http://www.w3.org/1999/xhtml"),j.each(function(){var a;const d=(a=this.firstChild)==null?void 0:a.firstChild;N.observe(d)});const I=C.selectAll(k("foreignObject"));I.each(function(){var a;const d=(a=this.firstChild)==null?void 0:a.firstChild;N.unobserve(d)});const V=j.merge(P),nt=c.flatMap(a=>{var d;return(d=a.payload)!=null&&d.fold?[]:a.children.map(f=>({source:a,target:f}))}),$=this.g.selectAll(k(te)).data(nt,a=>a.target.state.key),st=$.exit(),ot=$.enter().insert("path","g").attr("class","markmap-link").attr("data-depth",a=>a.target.state.depth).attr("data-path",a=>a.target.state.path).attr("d",a=>{const d=x(a.target),f=[d.x+d.width,d.y+d.height];return H({source:f,target:f})}).attr("stroke-width",0).merge($);this.svg.style("--markmap-max-width",o?`${o}px`:null),await new Promise(requestAnimationFrame),this._relayout(),b=b.data(v?[this._getHighlightRect(v)]:[]).join("rect"),this.transition(b).attr("x",a=>a.x).attr("y",a=>a.y).attr("width",a=>a.width).attr("height",a=>a.height),D.attr("transform",a=>{const d=x(a);return`translate(${d.x+d.width-a.state.rect.width},${d.y+d.height-a.state.rect.height})`}),this.transition(C).attr("transform",a=>{const d=y(a),f=d.x+d.width-a.state.rect.width,w=d.y+d.height-a.state.rect.height;return`translate(${f},${w})`}).remove(),this.transition(S).attr("transform",a=>`translate(${a.state.rect.x},${a.state.rect.y})`);const lt=C.selectAll(k("line"));this.transition(lt).attr("x1",a=>a.state.rect.width).attr("stroke-width",0),W.attr("x1",a=>a.state.rect.width).attr("x2",a=>a.state.rect.width),F.attr("y1",a=>a.state.rect.height+l(a)/2).attr("y2",a=>a.state.rect.height+l(a)/2),this.transition(F).attr("x1",-1).attr("x2",a=>a.state.rect.width+2).attr("stroke",a=>n(a)).attr("stroke-width",l);const ht=C.selectAll(k("circle"));this.transition(ht).attr("r",0).attr("stroke-width",0),T.attr("cx",a=>a.state.rect.width).attr("cy",a=>a.state.rect.height+l(a)/2),this.transition(T).attr("r",6).attr("stroke-width","1.5"),this.transition(I).style("opacity",0),V.attr("width",a=>Math.max(0,a.state.rect.width-r*2)).attr("height",a=>a.state.rect.height),this.transition(V).style("opacity",1),this.transition(st).attr("d",a=>{const d=y(a.target),f=[d.x+d.width,d.y+d.height+l(a.target)/2];return H({source:f,target:f})}).attr("stroke-width",0).remove(),this.transition(ot).attr("stroke",a=>n(a.target)).attr("stroke-width",a=>l(a.target)).attr("d",a=>{const d=a.source,f=a.target,w=[d.state.rect.x+d.state.rect.width,d.state.rect.y+d.state.rect.height+l(d)/2],ct=[f.state.rect.x,f.state.rect.y+f.state.rect.height+l(f)/2];return H({source:w,target:ct})}),i&&this.fit()}transition(t){const{duration:r}=this.options;return t.transition().duration(r)}async fit(t=this.options.maxInitialScale){const r=this.svg.node(),{width:i,height:n}=r.getBoundingClientRect(),{fitRatio:o}=this.options,{x1:l,y1:s,x2:h,y2:p}=this.state.rect,c=h-l,g=p-s,u=Math.min(i/c*o,n/g*o,t),m=yt.translate((i-c*u)/2-l*u,(n-g*u)/2-s*u).scale(u);return this.transition(this.svg).call(this.zoom.transform,m).end().catch(R)}findElement(t){let r;return this.g.selectAll(k(O)).each(function(i){i===t&&(r={data:i,g:this})}),r}async ensureVisible(t,r){var i;const n=(i=this.findElement(t))==null?void 0:i.data;if(!n)return;const o=this.svg.node(),l=o.getBoundingClientRect(),s=E(o),[h,p]=[n.state.rect.x,n.state.rect.x+n.state.rect.width+2].map(b=>b*s.k+s.x),[c,g]=[n.state.rect.y,n.state.rect.y+n.state.rect.height].map(b=>b*s.k+s.y),u={left:0,right:0,top:0,bottom:0,...r},m=[u.left-h,l.width-u.right-p],x=[u.top-c,l.height-u.bottom-g],y=m[0]*m[1]>0?Z(m,Math.abs)/s.k:0,v=x[0]*x[1]>0?Z(x,Math.abs)/s.k:0;if(y||v){const b=s.translate(y,v);return this.transition(this.svg).call(this.zoom.transform,b).end().catch(R)}}async centerNode(t,r){var i;const n=(i=this.findElement(t))==null?void 0:i.data;if(!n)return;const o=this.svg.node(),l=o.getBoundingClientRect(),s=E(o),h=(n.state.rect.x+n.state.rect.width/2)*s.k+s.x,p=(n.state.rect.y+n.state.rect.height/2)*s.k+s.y,c={left:0,right:0,top:0,bottom:0,...r},g=(c.left+l.width-c.right)/2,u=(c.top+l.height-c.bottom)/2,m=(g-h)/s.k,x=(u-p)/s.k;if(m||x){const y=s.translate(m,x);return this.transition(this.svg).call(this.zoom.transform,y).end().catch(R)}}async rescale(t){const r=this.svg.node(),{width:i,height:n}=r.getBoundingClientRect(),o=i/2,l=n/2,s=E(r),h=s.translate((o-s.x)*(1-t)/s.k,(l-s.y)*(1-t)/s.k).scale(t);return this.transition(this.svg).call(this.zoom.transform,h).end().catch(R)}destroy(){this.svg.on(".zoom",null),this.svg.html(null),this._disposeList.forEach(t=>{t()})}static create(t,r,i=null){const n=new it(t,r);return i&&n.setData(i).then(()=>{n.fit()}),n}}export{it as Markmap,k as childSelector,bt as defaultColorFn,Q as defaultOptions,ne as deriveOptions,se as globalCSS,G as isMacintosh,J as lineWidthFactory,he as loadCSS,ce as loadJS,ae as refreshHook,wt as simpleHash};
