import{_ as n,c as a,a as l,o as e}from"./app-kNiJQAdO.js";const o={};function p(t,s){return e(),a("div",null,s[0]||(s[0]=[l(`<h2 id="创建实体" tabindex="-1"><a class="header-anchor" href="#创建实体"><span>创建实体</span></a></h2><p>Microsoft.EntityFrameworkCore.SqlServer</p><p>Book.cs</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" data-title="cs" style="background-color:#282A36;color:#F8F8F2;"><pre class="shiki dracula vp-code"><code><span class="line"><span style="color:#FF79C6;">    public</span><span style="color:#FF79C6;"> class</span><span style="color:#8BE9FD;"> Book</span></span>
<span class="line"><span style="color:#F8F8F2;">    {</span></span>
<span class="line"><span style="color:#FF79C6;">        public</span><span style="color:#FF79C6;"> long</span><span style="color:#F8F8F2;"> Id { </span><span style="color:#FF79C6;">get</span><span style="color:#F8F8F2;">; </span><span style="color:#FF79C6;">set</span><span style="color:#F8F8F2;">; }</span></span>
<span class="line"><span style="color:#FF79C6;">        public</span><span style="color:#FF79C6;"> string</span><span style="color:#F8F8F2;"> Name { </span><span style="color:#FF79C6;">get</span><span style="color:#F8F8F2;">; </span><span style="color:#FF79C6;">set</span><span style="color:#F8F8F2;">; }</span></span>
<span class="line"><span style="color:#FF79C6;">        public</span><span style="color:#FF79C6;"> string</span><span style="color:#F8F8F2;"> Title { </span><span style="color:#FF79C6;">get</span><span style="color:#F8F8F2;">; </span><span style="color:#FF79C6;">set</span><span style="color:#F8F8F2;">; }</span></span>
<span class="line"><span style="color:#FF79C6;">        public</span><span style="color:#FF79C6;"> string</span><span style="color:#F8F8F2;"> Description { </span><span style="color:#FF79C6;">get</span><span style="color:#F8F8F2;">; </span><span style="color:#FF79C6;">set</span><span style="color:#F8F8F2;">; }</span></span>
<span class="line"><span style="color:#FF79C6;">        public</span><span style="color:#FF79C6;"> string</span><span style="color:#F8F8F2;"> Author { </span><span style="color:#FF79C6;">get</span><span style="color:#F8F8F2;">; </span><span style="color:#FF79C6;">set</span><span style="color:#F8F8F2;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">        public</span><span style="color:#8BE9FD;font-style:italic;"> DateTime</span><span style="color:#F8F8F2;"> publicTime { </span><span style="color:#FF79C6;">get</span><span style="color:#F8F8F2;">; </span><span style="color:#FF79C6;">set</span><span style="color:#F8F8F2;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">        public</span><span style="color:#8BE9FD;font-style:italic;"> DateTime</span><span style="color:#F8F8F2;"> updatedTime { </span><span style="color:#FF79C6;">get</span><span style="color:#F8F8F2;">; </span><span style="color:#FF79C6;">set</span><span style="color:#F8F8F2;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>BookEntityConfig</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" data-title="cs" style="background-color:#282A36;color:#F8F8F2;"><pre class="shiki dracula vp-code"><code><span class="line"><span style="color:#FF79C6;">    public</span><span style="color:#FF79C6;"> class</span><span style="color:#8BE9FD;"> BookEntityConfig</span><span style="color:#F8F8F2;">:</span><span style="color:#8BE9FD;font-style:italic;">IEntityTypeConfiguration</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#8BE9FD;font-style:italic;">Book</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    {</span></span>
<span class="line"><span style="color:#FF79C6;">        public</span><span style="color:#FF79C6;"> void</span><span style="color:#50FA7B;"> Configure</span><span style="color:#F8F8F2;">(</span><span style="color:#8BE9FD;font-style:italic;">EntityTypeBuilder</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#8BE9FD;font-style:italic;">Book</span><span style="color:#F8F8F2;">&gt; </span><span style="color:#FFB86C;font-style:italic;">builder</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">            builder.</span><span style="color:#50FA7B;">ToTable</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">T_Books</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">            builder.</span><span style="color:#50FA7B;">Property</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">b</span><span style="color:#FF79C6;"> =&gt;</span><span style="color:#F8F8F2;"> b.Title).</span><span style="color:#50FA7B;">HasMaxLength</span><span style="color:#F8F8F2;">(</span><span style="color:#BD93F9;">500</span><span style="color:#F8F8F2;">).</span><span style="color:#50FA7B;">IsRequired</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span></span>
<span class="line"><span style="color:#F8F8F2;">        }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MyDbContext</p><div class="language-cs line-numbers-mode" data-highlighter="shiki" data-ext="cs" data-title="cs" style="background-color:#282A36;color:#F8F8F2;"><pre class="shiki dracula vp-code"><code><span class="line"><span style="color:#FF79C6;">    public</span><span style="color:#FF79C6;"> class</span><span style="color:#8BE9FD;"> MyDbContext</span><span style="color:#F8F8F2;">:</span><span style="color:#8BE9FD;font-style:italic;">DbContext</span><span style="color:#F8F8F2;">      </span></span>
<span class="line"><span style="color:#F8F8F2;">    {</span></span>
<span class="line"><span style="color:#FF79C6;">        public</span><span style="color:#8BE9FD;font-style:italic;"> DbSet</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#8BE9FD;font-style:italic;">Book</span><span style="color:#F8F8F2;">&gt; Books { </span><span style="color:#FF79C6;">get</span><span style="color:#F8F8F2;">; </span><span style="color:#FF79C6;">set</span><span style="color:#F8F8F2;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">        protected</span><span style="color:#FF79C6;"> override</span><span style="color:#FF79C6;"> void</span><span style="color:#50FA7B;"> OnConfiguring</span><span style="color:#F8F8F2;">(</span><span style="color:#8BE9FD;font-style:italic;">DbContextOptionsBuilder</span><span style="color:#FFB86C;font-style:italic;"> optionsBuilder</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">        {</span></span>
<span class="line"><span style="color:#BD93F9;font-style:italic;">            base</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">OnConfiguring</span><span style="color:#F8F8F2;">(optionsBuilder);</span></span>
<span class="line"><span style="color:#F8F8F2;">            optionsBuilder.</span><span style="color:#50FA7B;">UseSqlServer</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">Server=(localdb)</span><span style="color:#FF79C6;">\\\\</span><span style="color:#F1FA8C;">MSSQLLocalDB;Database=c-sharp-learn;Trusted_Connection=True</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">        }</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="生成migrations" tabindex="-1"><a class="header-anchor" href="#生成migrations"><span>生成Migrations</span></a></h3><p>Microsoft.EntityFrameworkCore.Tools 更改数据类型要重新生成Migration</p><div class="language-pm line-numbers-mode" data-highlighter="shiki" data-ext="pm" data-title="pm" style="background-color:#282A36;color:#F8F8F2;"><pre class="shiki dracula vp-code"><code><span class="line"><span>Add-Migration customName</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>更新数据表结构用生成的Migration</p><div class="language-pm line-numbers-mode" data-highlighter="shiki" data-ext="pm" data-title="pm" style="background-color:#282A36;color:#F8F8F2;"><pre class="shiki dracula vp-code"><code><span class="line"><span>Update-database</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,13)]))}const r=n(o,[["render",p],["__file","entify-framework-core.html.vue"]]),c=JSON.parse('{"path":"/orm/entify-framework-core.html","title":"","lang":"en-US","frontmatter":{"description":"创建实体 Microsoft.EntityFrameworkCore.SqlServer Book.cs BookEntityConfig MyDbContext 生成Migrations Microsoft.EntityFrameworkCore.Tools 更改数据类型要重新生成Migration 更新数据表结构用生成的Migration","head":[["meta",{"property":"og:url","content":"https://luxiag.github.io/luxiag/blog/orm/entify-framework-core.html"}],["meta",{"property":"og:description","content":"创建实体 Microsoft.EntityFrameworkCore.SqlServer Book.cs BookEntityConfig MyDbContext 生成Migrations Microsoft.EntityFrameworkCore.Tools 更改数据类型要重新生成Migration 更新数据表结构用生成的Migration"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-11-03T04:27:20.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-03T04:27:20.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-11-03T04:27:20.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"luxiag\\",\\"url\\":\\"https://luxiag.github.io/luxiag\\"}]}"]]},"headers":[{"level":2,"title":"创建实体","slug":"创建实体","link":"#创建实体","children":[{"level":3,"title":"生成Migrations","slug":"生成migrations","link":"#生成migrations","children":[]}]}],"git":{"createdTime":1721654851000,"updatedTime":1730608040000,"contributors":[{"name":"luxiag","email":"luxiag@qq.com","commits":5}]},"readingTime":{"minutes":0.44,"words":131},"filePathRelative":"orm/entify-framework-core.md","localizedDate":"July 22, 2024","excerpt":"<h2>创建实体</h2>\\n<p>Microsoft.EntityFrameworkCore.SqlServer</p>\\n<p>Book.cs</p>\\n<div class=\\"language-cs line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"cs\\" data-title=\\"cs\\" style=\\"background-color:#282A36;color:#F8F8F2\\"><pre class=\\"shiki dracula vp-code\\"><code><span class=\\"line\\"><span style=\\"color:#FF79C6\\">    public</span><span style=\\"color:#FF79C6\\"> class</span><span style=\\"color:#8BE9FD\\"> Book</span></span>\\n<span class=\\"line\\"><span style=\\"color:#F8F8F2\\">    {</span></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">        public</span><span style=\\"color:#FF79C6\\"> long</span><span style=\\"color:#F8F8F2\\"> Id { </span><span style=\\"color:#FF79C6\\">get</span><span style=\\"color:#F8F8F2\\">; </span><span style=\\"color:#FF79C6\\">set</span><span style=\\"color:#F8F8F2\\">; }</span></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">        public</span><span style=\\"color:#FF79C6\\"> string</span><span style=\\"color:#F8F8F2\\"> Name { </span><span style=\\"color:#FF79C6\\">get</span><span style=\\"color:#F8F8F2\\">; </span><span style=\\"color:#FF79C6\\">set</span><span style=\\"color:#F8F8F2\\">; }</span></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">        public</span><span style=\\"color:#FF79C6\\"> string</span><span style=\\"color:#F8F8F2\\"> Title { </span><span style=\\"color:#FF79C6\\">get</span><span style=\\"color:#F8F8F2\\">; </span><span style=\\"color:#FF79C6\\">set</span><span style=\\"color:#F8F8F2\\">; }</span></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">        public</span><span style=\\"color:#FF79C6\\"> string</span><span style=\\"color:#F8F8F2\\"> Description { </span><span style=\\"color:#FF79C6\\">get</span><span style=\\"color:#F8F8F2\\">; </span><span style=\\"color:#FF79C6\\">set</span><span style=\\"color:#F8F8F2\\">; }</span></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">        public</span><span style=\\"color:#FF79C6\\"> string</span><span style=\\"color:#F8F8F2\\"> Author { </span><span style=\\"color:#FF79C6\\">get</span><span style=\\"color:#F8F8F2\\">; </span><span style=\\"color:#FF79C6\\">set</span><span style=\\"color:#F8F8F2\\">; }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">        public</span><span style=\\"color:#8BE9FD;font-style:italic\\"> DateTime</span><span style=\\"color:#F8F8F2\\"> publicTime { </span><span style=\\"color:#FF79C6\\">get</span><span style=\\"color:#F8F8F2\\">; </span><span style=\\"color:#FF79C6\\">set</span><span style=\\"color:#F8F8F2\\">; }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">        public</span><span style=\\"color:#8BE9FD;font-style:italic\\"> DateTime</span><span style=\\"color:#F8F8F2\\"> updatedTime { </span><span style=\\"color:#FF79C6\\">get</span><span style=\\"color:#F8F8F2\\">; </span><span style=\\"color:#FF79C6\\">set</span><span style=\\"color:#F8F8F2\\">; }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"color:#F8F8F2\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{r as comp,c as data};
