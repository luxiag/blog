import{_ as k,e as X,f as h,g as A,r as C,i as _,x as L,o as Z}from"./app-Bd-A8UqK.js";import{l as w,m as P,n as S,i,o as D,p as z,W as T,G as O,r as U,s as q}from"./three.module-_5Kft3IB.js";import{O as x}from"./OrbitControls-86TszHm5.js";const E=`
precision lowp float;
uniform float uWaresFrequency;
uniform float uScale;
uniform float uNoiseFrequency;
uniform float uNoiseScale;
uniform float uXzScale;
uniform float uTime;
uniform float uXspeed;
uniform float uZspeed;
uniform float uNoiseSpeed;

// 计算出的高度传递给片元着色器
varying float vElevation;

// 随机函数
float random (vec2 st) {
    return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);
}

// 旋转函数
vec2 rotate(vec2 uv, float rotation, vec2 mid)
{
    return vec2(
      cos(rotation) * (uv.x - mid.x) + sin(rotation) * (uv.y - mid.y) + mid.x,
      cos(rotation) * (uv.y - mid.y) - sin(rotation) * (uv.x - mid.x) + mid.y
    );
}

// 噪声函数
float noise (in vec2 _st) {
    vec2 i = floor(_st);
    vec2 f = fract(_st);

    // Four corners in 2D of a tile
    float a = random(i);
    float b = random(i + vec2(1.0, 0.0));
    float c = random(i + vec2(0.0, 1.0));
    float d = random(i + vec2(1.0, 1.0));

    vec2 u = f * f * (3.0 - 2.0 * f);

    return mix(a, b, u.x) +
            (c - a)* u.y * (1.0 - u.x) +
            (d - b) * u.x * u.y;
}


//	Classic Perlin 2D Noise 
//	by Stefan Gustavson
//
vec4 permute(vec4 x)
{
    return mod(((x*34.0)+1.0)*x, 289.0);
}

vec2 fade(vec2 t)
{
    return t*t*t*(t*(t*6.0-15.0)+10.0);
}

float cnoise(vec2 P)
{
    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);
    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);
    Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation
    vec4 ix = Pi.xzxz;
    vec4 iy = Pi.yyww;
    vec4 fx = Pf.xzxz;
    vec4 fy = Pf.yyww;
    vec4 i = permute(permute(ix) + iy);
    vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...
    vec4 gy = abs(gx) - 0.5;
    vec4 tx = floor(gx + 0.5);
    gx = gx - tx;
    vec2 g00 = vec2(gx.x,gy.x);
    vec2 g10 = vec2(gx.y,gy.y);
    vec2 g01 = vec2(gx.z,gy.z);
    vec2 g11 = vec2(gx.w,gy.w);
    vec4 norm = 1.79284291400159 - 0.85373472095314 * vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));
    g00 *= norm.x;
    g01 *= norm.y;
    g10 *= norm.z;
    g11 *= norm.w;
    float n00 = dot(g00, vec2(fx.x, fy.x));
    float n10 = dot(g10, vec2(fx.y, fy.y));
    float n01 = dot(g01, vec2(fx.z, fy.z));
    float n11 = dot(g11, vec2(fx.w, fy.w));
    vec2 fade_xy = fade(Pf.xy);
    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);
    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);
    return 2.3 * n_xy;
}


void main(){
    vec4 modelPosition = modelMatrix * vec4(position,1.0);

    float elevation = sin(modelPosition.x*uWaresFrequency+uTime*uXspeed)*sin(modelPosition.z*uWaresFrequency*uXzScale+uTime*uZspeed);

    elevation += -abs(cnoise(vec2(modelPosition.xz*uNoiseFrequency+uTime*uNoiseSpeed))) *uNoiseScale;
    
    vElevation = elevation;
    
    elevation *= uScale;

    

    modelPosition.y += elevation;

    gl_Position = projectionMatrix * viewMatrix *modelPosition;
}

`,N=`
precision lowp float;

uniform vec3 uHighColor;
uniform vec3 uLowColor;
varying float vElevation;
uniform float uOpacity;

void main(){
    float a = (vElevation+1.0)/2.0;
    vec3 color = mix(uLowColor,uHighColor,a);
    gl_FragColor = vec4(color,uOpacity);
}
`,H={__name:"water_smoke_cloud.html",setup(M,{expose:v}){v();let r;const e=C(),u=()=>{const a=new r.GUI,d=new w,t=new P(90,2,.1,1e3);t.position.set(0,0,2),d.add(t);const s={uWaresFrequency:14,uScale:.03,uXzScale:1.5,uNoiseFrequency:10,uNoiseScale:1.5,uLowColor:"#ff0000",uHighColor:"#ffff00",uXspeed:1,uZspeed:1,uNoiseSpeed:1,uOpacity:1},l=new S({vertexShader:E,fragmentShader:N,side:D,uniforms:{uWaresFrequency:{value:s.uWaresFrequency},uScale:{value:s.uScale},uNoiseFrequency:{value:s.uNoiseFrequency},uNoiseScale:{value:s.uNoiseScale},uXzScale:{value:s.uXzScale},uTime:{value:s.uTime},uLowColor:{value:new i(s.uLowColor)},uHighColor:{value:new i(s.uHighColor)},uXspeed:{value:s.uXspeed},uZspeed:{value:s.uZspeed},uNoiseSpeed:{value:s.uNoiseSpeed},uOpacity:{value:s.uOpacity}},transparent:!0});a.add(s,"uWaresFrequency").min(1).max(100).step(.1).onChange(n=>{l.uniforms.uWaresFrequency.value=n}),a.add(s,"uScale").min(0).max(.2).step(.001).onChange(n=>{l.uniforms.uScale.value=n}),a.add(s,"uNoiseFrequency").min(1).max(100).step(.1).onChange(n=>{l.uniforms.uNoiseFrequency.value=n}),a.add(s,"uNoiseScale").min(0).max(5).step(.001).onChange(n=>{l.uniforms.uNoiseScale.value=n}),a.add(s,"uXzScale").min(0).max(5).step(.1).onChange(n=>{l.uniforms.uXzScale.value=n}),a.addColor(s,"uLowColor").onFinishChange(n=>{l.uniforms.uLowColor.value=new i(n)}),a.addColor(s,"uHighColor").onFinishChange(n=>{l.uniforms.uHighColor.value=new i(n)}),a.add(s,"uXspeed").min(0).max(5).step(.001).onChange(n=>{l.uniforms.uXspeed.value=n}),a.add(s,"uZspeed").min(0).max(5).step(.001).onChange(n=>{l.uniforms.uZspeed.value=n}),a.add(s,"uNoiseSpeed").min(0).max(5).step(.001).onChange(n=>{l.uniforms.uNoiseSpeed.value=n}),a.add(s,"uOpacity").min(0).max(1).step(.01).onChange(n=>{l.uniforms.uOpacity.value=n});const F=new z(new(void 0)(1,1,1024,1024),l);F.rotation.x=-Math.PI/2,d.add(F);const c=new T;c.setSize(e.value.offsetWidth,e.value.offsetWidth/2),window.addEventListener("resize",()=>{c.setSize(e.value.offsetWidth,e.value.offsetWidth/2),c.setPixelRatio(window.devicePixelRatio)}),e.value.appendChild(c.domElement),e.value.appendChild(a.domElement),a.domElement.style.position="absolute",a.domElement.style.top="0px",a.domElement.style.right="0px";const m=new x(t,c.domElement);m.enableDamping=!0;const p=new q;function f(n){const b=p.getElapsedTime();l.uniforms.uTime.value=b,requestAnimationFrame(f),c.render(d,t)}f()},o=C(),g=()=>{const a=new r.GUI,d=new w,t=new P(90,2,.1,1e3);t.position.set(0,0,2),d.add(t);const l=new O().load("/assets/textures/ca.jpeg"),F={uFrequency:10,uScale:.1},c=new S({vertexShader:`
      uniform vec3 uColor;
      uniform float uFrequency;
      uniform float uScale;
      uniform float uTime;

      varying float vElevation;
      varying vec2 vUv;

      // highp -2^16-2^16
      // mediump = -2^10-2^10
      // lowp -2^8-2^8
      precision highp float;
      void main(){
          vec4 modelPosition = modelMatrix * vec4( position, 1.0 );

          modelPosition.z += sin((modelPosition.x+uTime) * uFrequency)*uScale ;
          modelPosition.z += cos((modelPosition.y+uTime) * uFrequency)*uScale ;

          vElevation = modelPosition.z;
          gl_Position =  projectionMatrix * viewMatrix * modelPosition;
          vUv = uv;

      }

    `,fragmentShader:`
      uniform vec3 uColor;
      varying float vElevation;
      precision highp float;
      varying vec2 vUv;

      uniform sampler2D uTexture;
      void main(){
          float alpha = (vElevation+0.1)+0.8;
          vec4 textureColor = texture2D(uTexture,vUv);
          textureColor.rgb*=alpha;
          gl_FragColor = textureColor;
      }

    `,uniforms:{uColor:{value:new i("purple")},uFrequency:{value:F.uFrequency},uScale:{value:F.uScale},uTime:{value:0},uTexture:{value:l}},side:D,transparent:!0});a.add(F,"uFrequency").min(0).max(50).step(.1).onChange(y=>{c.uniforms.uFrequency.value=y}),a.add(F,"uScale").min(0).max(1).step(.01).onChange(y=>{c.uniforms.uScale.value=y});const m=new z(new(void 0)(1,1,64,64),c);d.add(m);const p=new T;p.setSize(o.value.offsetWidth,o.value.offsetWidth/2),o.value.appendChild(p.domElement),o.value.appendChild(a.domElement),a.domElement.style.position="absolute",a.domElement.style.top="0px",a.domElement.style.right="0px",window.addEventListener("resize",()=>{p.setSize(o.value.offsetWidth,o.value.offsetWidth/2),p.setPixelRatio(window.devicePixelRatio)});const f=new x(t,p.domElement);f.enableDamping=!0;const n=new q;function b(y){const W=n.getElapsedTime();c.uniforms.uTime.value=W,requestAnimationFrame(b),p.render(d,t)}b()};_(async()=>{r=await L(()=>import("./dat.gui.module-DNo137I2.js"),[]),u(),g()});const B={get dat(){return r},set dat(a){r=a},fog:e,vertexShader:E,fragmentShader:N,initFog:u,float:o,initFloat:g,ref:C,onMounted:_,get THREE(){return U},get OrbitControls(){return x}};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}},R={ref:"float",class:"fog_dom"},j={ref:"fog",class:"fog_dom"};function G(M,v,r,e,u,o){return Z(),X("div",null,[v[0]||(v[0]=h(`<div class="language-glsl line-numbers-mode" data-highlighter="shiki" data-ext="glsl" data-title="glsl" style="background-color:#282A36;color:#F8F8F2;" data-v-b093fc13><pre class="shiki dracula vp-code" data-v-b093fc13><code data-v-b093fc13><span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13># vertexShader</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> vec3</span><span style="color:#F8F8F2;" data-v-b093fc13> uColor;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> uFrequency;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> uScale;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> uTim</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>varying</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> vElevation;</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>varying</span><span style="color:#FF79C6;" data-v-b093fc13> vec2</span><span style="color:#F8F8F2;" data-v-b093fc13> vUv</span></span>
<span class="line" data-v-b093fc13><span style="color:#6272A4;" data-v-b093fc13>// highp -2^16-2^16</span></span>
<span class="line" data-v-b093fc13><span style="color:#6272A4;" data-v-b093fc13>// mediump = -2^10-2^10</span></span>
<span class="line" data-v-b093fc13><span style="color:#6272A4;" data-v-b093fc13>// lowp -2^8-2^8</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>precision highp </span><span style="color:#FF79C6;" data-v-b093fc13>float</span><span style="color:#F8F8F2;" data-v-b093fc13>;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>void</span><span style="color:#50FA7B;" data-v-b093fc13> main</span><span style="color:#F8F8F2;" data-v-b093fc13>(){</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 modelPosition </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13> modelMatrix </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#50FA7B;" data-v-b093fc13> vec4</span><span style="color:#F8F8F2;" data-v-b093fc13>( position, </span><span style="color:#BD93F9;" data-v-b093fc13>1.0</span><span style="color:#F8F8F2;" data-v-b093fc13> </span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    modelPosition.z </span><span style="color:#FF79C6;" data-v-b093fc13>+=</span><span style="color:#50FA7B;" data-v-b093fc13> sin</span><span style="color:#F8F8F2;" data-v-b093fc13>((modelPosition.x</span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#F8F8F2;" data-v-b093fc13>uTime) </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> uFrequency)</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>uScale ;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    modelPosition.z </span><span style="color:#FF79C6;" data-v-b093fc13>+=</span><span style="color:#50FA7B;" data-v-b093fc13> cos</span><span style="color:#F8F8F2;" data-v-b093fc13>((modelPosition.y</span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#F8F8F2;" data-v-b093fc13>uTime) </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> uFrequency)</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>uScale</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vElevation </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13> modelPosition.z;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    gl_Position </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13>  projectionMatrix </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> viewMatrix </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> modelPosition;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vUv </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13> u</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;" data-v-b093fc13><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div></div></div>`,1)),A("div",R,null,512),v[1]||(v[1]=h(`<div class="language-glsl line-numbers-mode" data-highlighter="shiki" data-ext="glsl" data-title="glsl" style="background-color:#282A36;color:#F8F8F2;" data-v-b093fc13><pre class="shiki dracula vp-code" data-v-b093fc13><code data-v-b093fc13><span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13># vertexShader</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>precision lowp </span><span style="color:#FF79C6;" data-v-b093fc13>float</span><span style="color:#F8F8F2;" data-v-b093fc13>;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> uWaresFrequency;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> uScale;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> uNoiseFrequency;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> uNoiseScale;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> uXzScale;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> uTime;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> uXspeed;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> uZspeed;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>uniform</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> uNoiseSpeed;</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#6272A4;" data-v-b093fc13>// 计算出的高度传递给片元着色器</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>varying</span><span style="color:#FF79C6;" data-v-b093fc13> float</span><span style="color:#F8F8F2;" data-v-b093fc13> vElevation;</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#6272A4;" data-v-b093fc13>// 随机函数</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>float</span><span style="color:#50FA7B;" data-v-b093fc13> random</span><span style="color:#F8F8F2;" data-v-b093fc13> (vec2 </span><span style="color:#FFB86C;font-style:italic;" data-v-b093fc13>st</span><span style="color:#F8F8F2;" data-v-b093fc13>) {</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    return</span><span style="color:#50FA7B;" data-v-b093fc13> fract</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#50FA7B;" data-v-b093fc13>sin</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#50FA7B;" data-v-b093fc13>dot</span><span style="color:#F8F8F2;" data-v-b093fc13>(st.xy,</span><span style="color:#50FA7B;" data-v-b093fc13>vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#BD93F9;" data-v-b093fc13>12.9898</span><span style="color:#F8F8F2;" data-v-b093fc13>,</span><span style="color:#BD93F9;" data-v-b093fc13>78.233</span><span style="color:#F8F8F2;" data-v-b093fc13>)))</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#BD93F9;" data-v-b093fc13>43758.5453123</span><span style="color:#F8F8F2;" data-v-b093fc13>);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>}</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#6272A4;" data-v-b093fc13>// 旋转函数</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>vec2</span><span style="color:#50FA7B;" data-v-b093fc13> rotate</span><span style="color:#F8F8F2;" data-v-b093fc13>(vec2 </span><span style="color:#FFB86C;font-style:italic;" data-v-b093fc13>uv</span><span style="color:#F8F8F2;" data-v-b093fc13>, </span><span style="color:#FF79C6;" data-v-b093fc13>float</span><span style="color:#FFB86C;font-style:italic;" data-v-b093fc13> rotation</span><span style="color:#F8F8F2;" data-v-b093fc13>, vec2 </span><span style="color:#FFB86C;font-style:italic;" data-v-b093fc13>mid</span><span style="color:#F8F8F2;" data-v-b093fc13>)</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>{</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    return</span><span style="color:#50FA7B;" data-v-b093fc13> vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span></span>
<span class="line" data-v-b093fc13><span style="color:#50FA7B;" data-v-b093fc13>      cos</span><span style="color:#F8F8F2;" data-v-b093fc13>(rotation) </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> (uv.x </span><span style="color:#FF79C6;" data-v-b093fc13>-</span><span style="color:#F8F8F2;" data-v-b093fc13> mid.x) </span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#50FA7B;" data-v-b093fc13> sin</span><span style="color:#F8F8F2;" data-v-b093fc13>(rotation) </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> (uv.y </span><span style="color:#FF79C6;" data-v-b093fc13>-</span><span style="color:#F8F8F2;" data-v-b093fc13> mid.y) </span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#F8F8F2;" data-v-b093fc13> mid.x,</span></span>
<span class="line" data-v-b093fc13><span style="color:#50FA7B;" data-v-b093fc13>      cos</span><span style="color:#F8F8F2;" data-v-b093fc13>(rotation) </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> (uv.y </span><span style="color:#FF79C6;" data-v-b093fc13>-</span><span style="color:#F8F8F2;" data-v-b093fc13> mid.y) </span><span style="color:#FF79C6;" data-v-b093fc13>-</span><span style="color:#50FA7B;" data-v-b093fc13> sin</span><span style="color:#F8F8F2;" data-v-b093fc13>(rotation) </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> (uv.x </span><span style="color:#FF79C6;" data-v-b093fc13>-</span><span style="color:#F8F8F2;" data-v-b093fc13> mid.x) </span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#F8F8F2;" data-v-b093fc13> mid.y</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    );</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>}</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#6272A4;" data-v-b093fc13>// 噪声函数</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>float</span><span style="color:#50FA7B;" data-v-b093fc13> noise</span><span style="color:#F8F8F2;" data-v-b093fc13> (in vec2 </span><span style="color:#FFB86C;font-style:italic;" data-v-b093fc13>_st</span><span style="color:#F8F8F2;" data-v-b093fc13>) {</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec2 i </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> floor</span><span style="color:#F8F8F2;" data-v-b093fc13>(_st);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec2 f </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> fract</span><span style="color:#F8F8F2;" data-v-b093fc13>(_st);</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#6272A4;" data-v-b093fc13>    // Four corners in 2D of a tile</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    float</span><span style="color:#F8F8F2;" data-v-b093fc13> a </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> random</span><span style="color:#F8F8F2;" data-v-b093fc13>(i);</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    float</span><span style="color:#F8F8F2;" data-v-b093fc13> b </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> random</span><span style="color:#F8F8F2;" data-v-b093fc13>(i </span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#50FA7B;" data-v-b093fc13> vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#BD93F9;" data-v-b093fc13>1.0</span><span style="color:#F8F8F2;" data-v-b093fc13>, </span><span style="color:#BD93F9;" data-v-b093fc13>0.0</span><span style="color:#F8F8F2;" data-v-b093fc13>));</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    float</span><span style="color:#F8F8F2;" data-v-b093fc13> c </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> random</span><span style="color:#F8F8F2;" data-v-b093fc13>(i </span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#50FA7B;" data-v-b093fc13> vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#BD93F9;" data-v-b093fc13>0.0</span><span style="color:#F8F8F2;" data-v-b093fc13>, </span><span style="color:#BD93F9;" data-v-b093fc13>1.0</span><span style="color:#F8F8F2;" data-v-b093fc13>));</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    float</span><span style="color:#F8F8F2;" data-v-b093fc13> d </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> random</span><span style="color:#F8F8F2;" data-v-b093fc13>(i </span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#50FA7B;" data-v-b093fc13> vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#BD93F9;" data-v-b093fc13>1.0</span><span style="color:#F8F8F2;" data-v-b093fc13>, </span><span style="color:#BD93F9;" data-v-b093fc13>1.0</span><span style="color:#F8F8F2;" data-v-b093fc13>));</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec2 u </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13> f </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> f </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> (</span><span style="color:#BD93F9;" data-v-b093fc13>3.0</span><span style="color:#FF79C6;" data-v-b093fc13> -</span><span style="color:#BD93F9;" data-v-b093fc13> 2.0</span><span style="color:#FF79C6;" data-v-b093fc13> *</span><span style="color:#F8F8F2;" data-v-b093fc13> f);</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    return</span><span style="color:#50FA7B;" data-v-b093fc13> mix</span><span style="color:#F8F8F2;" data-v-b093fc13>(a, b, u.x) </span><span style="color:#FF79C6;" data-v-b093fc13>+</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>            (c </span><span style="color:#FF79C6;" data-v-b093fc13>-</span><span style="color:#F8F8F2;" data-v-b093fc13> a)</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> u.y </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> (</span><span style="color:#BD93F9;" data-v-b093fc13>1.0</span><span style="color:#FF79C6;" data-v-b093fc13> -</span><span style="color:#F8F8F2;" data-v-b093fc13> u.x) </span><span style="color:#FF79C6;" data-v-b093fc13>+</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>            (d </span><span style="color:#FF79C6;" data-v-b093fc13>-</span><span style="color:#F8F8F2;" data-v-b093fc13> b) </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> u.x </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> u.y;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>}</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#6272A4;" data-v-b093fc13>//	Classic Perlin 2D Noise</span></span>
<span class="line" data-v-b093fc13><span style="color:#6272A4;" data-v-b093fc13>//	by Stefan Gustavson</span></span>
<span class="line" data-v-b093fc13><span style="color:#6272A4;" data-v-b093fc13>//</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>vec4</span><span style="color:#50FA7B;" data-v-b093fc13> permute</span><span style="color:#F8F8F2;" data-v-b093fc13>(vec4 </span><span style="color:#FFB86C;font-style:italic;" data-v-b093fc13>x</span><span style="color:#F8F8F2;" data-v-b093fc13>)</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>{</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    return</span><span style="color:#50FA7B;" data-v-b093fc13> mod</span><span style="color:#F8F8F2;" data-v-b093fc13>(((x</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#BD93F9;" data-v-b093fc13>34.0</span><span style="color:#F8F8F2;" data-v-b093fc13>)</span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#BD93F9;" data-v-b093fc13>1.0</span><span style="color:#F8F8F2;" data-v-b093fc13>)</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>x, </span><span style="color:#BD93F9;" data-v-b093fc13>289.0</span><span style="color:#F8F8F2;" data-v-b093fc13>);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>}</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>vec2</span><span style="color:#50FA7B;" data-v-b093fc13> fade</span><span style="color:#F8F8F2;" data-v-b093fc13>(vec2 </span><span style="color:#FFB86C;font-style:italic;" data-v-b093fc13>t</span><span style="color:#F8F8F2;" data-v-b093fc13>)</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>{</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    return</span><span style="color:#F8F8F2;" data-v-b093fc13> t</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>t</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>t</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>(t</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>(t</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#BD93F9;" data-v-b093fc13>6.0</span><span style="color:#FF79C6;" data-v-b093fc13>-</span><span style="color:#BD93F9;" data-v-b093fc13>15.0</span><span style="color:#F8F8F2;" data-v-b093fc13>)</span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#BD93F9;" data-v-b093fc13>10.0</span><span style="color:#F8F8F2;" data-v-b093fc13>);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>}</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>float</span><span style="color:#50FA7B;" data-v-b093fc13> cnoise</span><span style="color:#F8F8F2;" data-v-b093fc13>(vec2 </span><span style="color:#FFB86C;font-style:italic;" data-v-b093fc13>P</span><span style="color:#F8F8F2;" data-v-b093fc13>)</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>{</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 Pi </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> floor</span><span style="color:#F8F8F2;" data-v-b093fc13>(P.xyxy) </span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#50FA7B;" data-v-b093fc13> vec4</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#BD93F9;" data-v-b093fc13>0.0</span><span style="color:#F8F8F2;" data-v-b093fc13>, </span><span style="color:#BD93F9;" data-v-b093fc13>0.0</span><span style="color:#F8F8F2;" data-v-b093fc13>, </span><span style="color:#BD93F9;" data-v-b093fc13>1.0</span><span style="color:#F8F8F2;" data-v-b093fc13>, </span><span style="color:#BD93F9;" data-v-b093fc13>1.0</span><span style="color:#F8F8F2;" data-v-b093fc13>);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 Pf </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> fract</span><span style="color:#F8F8F2;" data-v-b093fc13>(P.xyxy) </span><span style="color:#FF79C6;" data-v-b093fc13>-</span><span style="color:#50FA7B;" data-v-b093fc13> vec4</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#BD93F9;" data-v-b093fc13>0.0</span><span style="color:#F8F8F2;" data-v-b093fc13>, </span><span style="color:#BD93F9;" data-v-b093fc13>0.0</span><span style="color:#F8F8F2;" data-v-b093fc13>, </span><span style="color:#BD93F9;" data-v-b093fc13>1.0</span><span style="color:#F8F8F2;" data-v-b093fc13>, </span><span style="color:#BD93F9;" data-v-b093fc13>1.0</span><span style="color:#F8F8F2;" data-v-b093fc13>);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    Pi </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> mod</span><span style="color:#F8F8F2;" data-v-b093fc13>(Pi, </span><span style="color:#BD93F9;" data-v-b093fc13>289.0</span><span style="color:#F8F8F2;" data-v-b093fc13>);</span><span style="color:#6272A4;" data-v-b093fc13> // To avoid truncation effects in permutation</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 ix </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13> Pi.xzxz;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 iy </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13> Pi.yyww;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 fx </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13> Pf.xzxz;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 fy </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13> Pf.yyww;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 i </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> permute</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#50FA7B;" data-v-b093fc13>permute</span><span style="color:#F8F8F2;" data-v-b093fc13>(ix) </span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#F8F8F2;" data-v-b093fc13> iy);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 gx </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#BD93F9;" data-v-b093fc13> 2.0</span><span style="color:#FF79C6;" data-v-b093fc13> *</span><span style="color:#50FA7B;" data-v-b093fc13> fract</span><span style="color:#F8F8F2;" data-v-b093fc13>(i </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#BD93F9;" data-v-b093fc13> 0.0243902439</span><span style="color:#F8F8F2;" data-v-b093fc13>) </span><span style="color:#FF79C6;" data-v-b093fc13>-</span><span style="color:#BD93F9;" data-v-b093fc13> 1.0</span><span style="color:#F8F8F2;" data-v-b093fc13>;</span><span style="color:#6272A4;" data-v-b093fc13> // 1/41 = 0.024...</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 gy </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> abs</span><span style="color:#F8F8F2;" data-v-b093fc13>(gx) </span><span style="color:#FF79C6;" data-v-b093fc13>-</span><span style="color:#BD93F9;" data-v-b093fc13> 0.5</span><span style="color:#F8F8F2;" data-v-b093fc13>;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 tx </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> floor</span><span style="color:#F8F8F2;" data-v-b093fc13>(gx </span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#BD93F9;" data-v-b093fc13> 0.5</span><span style="color:#F8F8F2;" data-v-b093fc13>);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    gx </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13> gx </span><span style="color:#FF79C6;" data-v-b093fc13>-</span><span style="color:#F8F8F2;" data-v-b093fc13> tx;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec2 g00 </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(gx.x,gy.x);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec2 g10 </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(gx.y,gy.y);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec2 g01 </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(gx.z,gy.z);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec2 g11 </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(gx.w,gy.w);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 norm </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#BD93F9;" data-v-b093fc13> 1.79284291400159</span><span style="color:#FF79C6;" data-v-b093fc13> -</span><span style="color:#BD93F9;" data-v-b093fc13> 0.85373472095314</span><span style="color:#FF79C6;" data-v-b093fc13> *</span><span style="color:#50FA7B;" data-v-b093fc13> vec4</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#50FA7B;" data-v-b093fc13>dot</span><span style="color:#F8F8F2;" data-v-b093fc13>(g00, g00), </span><span style="color:#50FA7B;" data-v-b093fc13>dot</span><span style="color:#F8F8F2;" data-v-b093fc13>(g01, g01), </span><span style="color:#50FA7B;" data-v-b093fc13>dot</span><span style="color:#F8F8F2;" data-v-b093fc13>(g10, g10), </span><span style="color:#50FA7B;" data-v-b093fc13>dot</span><span style="color:#F8F8F2;" data-v-b093fc13>(g11, g11));</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    g00 </span><span style="color:#FF79C6;" data-v-b093fc13>*=</span><span style="color:#F8F8F2;" data-v-b093fc13> norm.x;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    g01 </span><span style="color:#FF79C6;" data-v-b093fc13>*=</span><span style="color:#F8F8F2;" data-v-b093fc13> norm.y;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    g10 </span><span style="color:#FF79C6;" data-v-b093fc13>*=</span><span style="color:#F8F8F2;" data-v-b093fc13> norm.z;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    g11 </span><span style="color:#FF79C6;" data-v-b093fc13>*=</span><span style="color:#F8F8F2;" data-v-b093fc13> norm.w;</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    float</span><span style="color:#F8F8F2;" data-v-b093fc13> n00 </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> dot</span><span style="color:#F8F8F2;" data-v-b093fc13>(g00, </span><span style="color:#50FA7B;" data-v-b093fc13>vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(fx.x, fy.x));</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    float</span><span style="color:#F8F8F2;" data-v-b093fc13> n10 </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> dot</span><span style="color:#F8F8F2;" data-v-b093fc13>(g10, </span><span style="color:#50FA7B;" data-v-b093fc13>vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(fx.y, fy.y));</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    float</span><span style="color:#F8F8F2;" data-v-b093fc13> n01 </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> dot</span><span style="color:#F8F8F2;" data-v-b093fc13>(g01, </span><span style="color:#50FA7B;" data-v-b093fc13>vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(fx.z, fy.z));</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    float</span><span style="color:#F8F8F2;" data-v-b093fc13> n11 </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> dot</span><span style="color:#F8F8F2;" data-v-b093fc13>(g11, </span><span style="color:#50FA7B;" data-v-b093fc13>vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(fx.w, fy.w));</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec2 fade_xy </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> fade</span><span style="color:#F8F8F2;" data-v-b093fc13>(Pf.xy);</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec2 n_x </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> mix</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#50FA7B;" data-v-b093fc13>vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(n00, n01), </span><span style="color:#50FA7B;" data-v-b093fc13>vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(n10, n11), fade_xy.x);</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    float</span><span style="color:#F8F8F2;" data-v-b093fc13> n_xy </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> mix</span><span style="color:#F8F8F2;" data-v-b093fc13>(n_x.x, n_x.y, fade_xy.y);</span></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    return</span><span style="color:#BD93F9;" data-v-b093fc13> 2.3</span><span style="color:#FF79C6;" data-v-b093fc13> *</span><span style="color:#F8F8F2;" data-v-b093fc13> n_xy;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>}</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>void</span><span style="color:#50FA7B;" data-v-b093fc13> main</span><span style="color:#F8F8F2;" data-v-b093fc13>(){</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vec4 modelPosition </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13> modelMatrix </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#50FA7B;" data-v-b093fc13> vec4</span><span style="color:#F8F8F2;" data-v-b093fc13>(position,</span><span style="color:#BD93F9;" data-v-b093fc13>1.0</span><span style="color:#F8F8F2;" data-v-b093fc13>);</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#FF79C6;" data-v-b093fc13>    float</span><span style="color:#F8F8F2;" data-v-b093fc13> elevation </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#50FA7B;" data-v-b093fc13> sin</span><span style="color:#F8F8F2;" data-v-b093fc13>(modelPosition.x</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>uWaresFrequency</span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#F8F8F2;" data-v-b093fc13>uTime</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>uXspeed)</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#50FA7B;" data-v-b093fc13>sin</span><span style="color:#F8F8F2;" data-v-b093fc13>(modelPosition.z</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>uWaresFrequency</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>uXzScale</span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#F8F8F2;" data-v-b093fc13>uTime</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>uZspeed);</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    elevation </span><span style="color:#FF79C6;" data-v-b093fc13>+=</span><span style="color:#FF79C6;" data-v-b093fc13> -</span><span style="color:#50FA7B;" data-v-b093fc13>abs</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#50FA7B;" data-v-b093fc13>cnoise</span><span style="color:#F8F8F2;" data-v-b093fc13>(</span><span style="color:#50FA7B;" data-v-b093fc13>vec2</span><span style="color:#F8F8F2;" data-v-b093fc13>(modelPosition.xz</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>uNoiseFrequency</span><span style="color:#FF79C6;" data-v-b093fc13>+</span><span style="color:#F8F8F2;" data-v-b093fc13>uTime</span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>uNoiseSpeed))) </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>uNoiseScale;</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    vElevation </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13> elevation;</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    elevation </span><span style="color:#FF79C6;" data-v-b093fc13>*=</span><span style="color:#F8F8F2;" data-v-b093fc13> uScale;</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    modelPosition.y </span><span style="color:#FF79C6;" data-v-b093fc13>+=</span><span style="color:#F8F8F2;" data-v-b093fc13> elevation;</span></span>
<span class="line" data-v-b093fc13></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>    gl_Position </span><span style="color:#FF79C6;" data-v-b093fc13>=</span><span style="color:#F8F8F2;" data-v-b093fc13> projectionMatrix </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13> viewMatrix </span><span style="color:#FF79C6;" data-v-b093fc13>*</span><span style="color:#F8F8F2;" data-v-b093fc13>modelPosition;</span></span>
<span class="line" data-v-b093fc13><span style="color:#F8F8F2;" data-v-b093fc13>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;" data-v-b093fc13><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div><div class="line-number" data-v-b093fc13></div></div></div>`,1)),A("div",j,null,512)])}const J=k(H,[["render",G],["__scopeId","data-v-b093fc13"],["__file","water_smoke_cloud.html.vue"]]),K=JSON.parse('{"path":"/glsl/water_smoke_cloud.html","title":"水烟雾云","lang":"en-US","frontmatter":{"title":"水烟雾云","date":"2022-10-11T00:00:00.000Z","category":["GLSL"],"head":[["meta",{"property":"og:url","content":"https://luxiag.github.io/luxiag/blog/glsl/water_smoke_cloud.html"}],["meta",{"property":"og:title","content":"水烟雾云"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-10-31T11:40:02.000Z"}],["meta",{"property":"article:published_time","content":"2022-10-11T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-10-31T11:40:02.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"水烟雾云\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-10-11T00:00:00.000Z\\",\\"dateModified\\":\\"2024-10-31T11:40:02.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"luxiag\\",\\"url\\":\\"https://luxiag.github.io/luxiag\\"}]}"]]},"git":{"createdTime":1678776443000,"updatedTime":1730374802000,"contributors":[{"name":"luxiag","username":"luxiag","email":"luxiag@qq.com","commits":8,"url":"https://github.com/luxiag"},{"name":"卢祥","username":"卢祥","email":"example@qq.com","commits":1,"url":"https://github.com/卢祥"}]},"readingTime":{"minutes":5.93,"words":1778},"filePathRelative":"glsl/water_smoke_cloud.md","localizedDate":"October 11, 2022","excerpt":"<div class=\\"language-glsl line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"glsl\\" data-title=\\"glsl\\" style=\\"background-color:#282A36;color:#F8F8F2\\"><pre class=\\"shiki dracula vp-code\\"><code><span class=\\"line\\"><span style=\\"color:#F8F8F2\\"># vertexShader</span></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">uniform</span><span style=\\"color:#FF79C6\\"> vec3</span><span style=\\"color:#F8F8F2\\"> uColor;</span></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">uniform</span><span style=\\"color:#FF79C6\\"> float</span><span style=\\"color:#F8F8F2\\"> uFrequency;</span></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">uniform</span><span style=\\"color:#FF79C6\\"> float</span><span style=\\"color:#F8F8F2\\"> uScale;</span></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">uniform</span><span style=\\"color:#FF79C6\\"> float</span><span style=\\"color:#F8F8F2\\"> uTim</span></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">varying</span><span style=\\"color:#FF79C6\\"> float</span><span style=\\"color:#F8F8F2\\"> vElevation;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">varying</span><span style=\\"color:#FF79C6\\"> vec2</span><span style=\\"color:#F8F8F2\\"> vUv</span></span>\\n<span class=\\"line\\"><span style=\\"color:#6272A4\\">// highp -2^16-2^16</span></span>\\n<span class=\\"line\\"><span style=\\"color:#6272A4\\">// mediump = -2^10-2^10</span></span>\\n<span class=\\"line\\"><span style=\\"color:#6272A4\\">// lowp -2^8-2^8</span></span>\\n<span class=\\"line\\"><span style=\\"color:#F8F8F2\\">precision highp </span><span style=\\"color:#FF79C6\\">float</span><span style=\\"color:#F8F8F2\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"color:#FF79C6\\">void</span><span style=\\"color:#50FA7B\\"> main</span><span style=\\"color:#F8F8F2\\">(){</span></span>\\n<span class=\\"line\\"><span style=\\"color:#F8F8F2\\">    vec4 modelPosition </span><span style=\\"color:#FF79C6\\">=</span><span style=\\"color:#F8F8F2\\"> modelMatrix </span><span style=\\"color:#FF79C6\\">*</span><span style=\\"color:#50FA7B\\"> vec4</span><span style=\\"color:#F8F8F2\\">( position, </span><span style=\\"color:#BD93F9\\">1.0</span><span style=\\"color:#F8F8F2\\"> </span></span>\\n<span class=\\"line\\"><span style=\\"color:#F8F8F2\\">    modelPosition.z </span><span style=\\"color:#FF79C6\\">+=</span><span style=\\"color:#50FA7B\\"> sin</span><span style=\\"color:#F8F8F2\\">((modelPosition.x</span><span style=\\"color:#FF79C6\\">+</span><span style=\\"color:#F8F8F2\\">uTime) </span><span style=\\"color:#FF79C6\\">*</span><span style=\\"color:#F8F8F2\\"> uFrequency)</span><span style=\\"color:#FF79C6\\">*</span><span style=\\"color:#F8F8F2\\">uScale ;</span></span>\\n<span class=\\"line\\"><span style=\\"color:#F8F8F2\\">    modelPosition.z </span><span style=\\"color:#FF79C6\\">+=</span><span style=\\"color:#50FA7B\\"> cos</span><span style=\\"color:#F8F8F2\\">((modelPosition.y</span><span style=\\"color:#FF79C6\\">+</span><span style=\\"color:#F8F8F2\\">uTime) </span><span style=\\"color:#FF79C6\\">*</span><span style=\\"color:#F8F8F2\\"> uFrequency)</span><span style=\\"color:#FF79C6\\">*</span><span style=\\"color:#F8F8F2\\">uScale</span></span>\\n<span class=\\"line\\"><span style=\\"color:#F8F8F2\\">    vElevation </span><span style=\\"color:#FF79C6\\">=</span><span style=\\"color:#F8F8F2\\"> modelPosition.z;</span></span>\\n<span class=\\"line\\"><span style=\\"color:#F8F8F2\\">    gl_Position </span><span style=\\"color:#FF79C6\\">=</span><span style=\\"color:#F8F8F2\\">  projectionMatrix </span><span style=\\"color:#FF79C6\\">*</span><span style=\\"color:#F8F8F2\\"> viewMatrix </span><span style=\\"color:#FF79C6\\">*</span><span style=\\"color:#F8F8F2\\"> modelPosition;</span></span>\\n<span class=\\"line\\"><span style=\\"color:#F8F8F2\\">    vUv </span><span style=\\"color:#FF79C6\\">=</span><span style=\\"color:#F8F8F2\\"> u</span></span>\\n<span class=\\"line\\"><span style=\\"color:#F8F8F2\\">}</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>"}');export{J as comp,K as data};
